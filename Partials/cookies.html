<!--
==============================================================================

    __    _ ____            __  ___           _         _____                 _               
   / /   (_) __ \____ _    /  |/  /_  _______(_)____   / ___/___  ______   __(_)_______  _____
  / /   / / /_/ / __ `/   / /|_/ / / / / ___/ / ___/   \__ \/ _ \/ ___/ | / / / ___/ _ \/ ___/
 / /___/ / ____/ /_/ /   / /  / / /_/ (__  ) / /__    ___/ /  __/ /   | |/ / / /__/  __(__  ) 
/_____/_/_/    \__,_/   /_/  /_/\__,_/____/_/\___/   /____/\___/_/    |___/_/\___/\___/____/  

   LiPa Music Services – Abteilung Webentwicklung
   © 2026 LiPa Music Services GbR
   https://www.lipamusicservices.com

==============================================================================
-->
<div class="CookieBanner" id="CookieBanner" hidden>
  <div class="CookieBanner__inner" role="dialog" aria-live="polite" aria-label="Cookie Hinweis">
    <div class="CookieBanner__text">
      <strong>Cookies & externe Inhalte</strong>
      <p>
        Diese Website verwendet Cookies und ggf. externe Inhalte (z. B. Google Fonts, Maps, Videos),
        um die Seite zuverlässig darzustellen. Du kannst entscheiden, was erlaubt ist.
      </p>
    </div>

    <div class="CookieBanner__actions">
      <button class="btn ghost" type="button" id="CookieDecline">Ablehnen</button>
      <button class="btn primary" type="button" id="CookieAccept">Akzeptieren</button>
    </div>
  </div>

  <script>
    (function () {
      const KEY = "cookieConsent.v1";

      const banner  = document.getElementById("CookieBanner");
      const accept  = document.getElementById("CookieAccept");
      const decline = document.getElementById("CookieDecline");

      function setConsent(value){
        try { localStorage.setItem(KEY, value); } catch(e){}
      }

      function getConsent(){
        try { return localStorage.getItem(KEY); } catch(e){ return null; }
      }

      function applyConsent(value){
        // Hook: Here you can enable gated external resources later.
        // Example pattern (you can implement later):
        // - data-consent-link="external" + data-href="..."
        // - if consent granted: copy data-href -> href/src
        document.documentElement.dataset.consent = value;
        document.dispatchEvent(new CustomEvent("consent:changed", { detail: { consent: value } }));
      }

      function hide(){ if (banner) banner.hidden = true; }
      function show(){ if (banner) banner.hidden = false; }

      const existing = getConsent();
      if (!existing) {
        show();
      } else {
        applyConsent(existing);
        hide();
      }

      if (accept) accept.addEventListener("click", () => {
        setConsent("accept");
        applyConsent("accept");
        hide();
      });

      if (decline) decline.addEventListener("click", () => {
        setConsent("decline");
        applyConsent("decline");
        hide();
      });
    })();
  </script>
</div>